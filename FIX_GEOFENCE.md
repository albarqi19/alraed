# ๐บ๏ธ ุญู ูุดููุฉ ุงูุชุญูู ูู ุงููููุน (Geofence)

## ุงููุดููุฉ

ุนูุฏ ุทูุจ ุงููุฏุงุกุ ุชุธูุฑ ุฑุณุงูุฉ:
```
ูุฌุจ ุฃู ุชููู ุฏุงุฎู ูุทุงู 145 ูุชุฑ ุญูู ุงููุฏุฑุณุฉ ูุทูุจ ุงููุฏุงุก.
ุงููุณุงูุฉ ุงูุญุงููุฉ 3304382 ูุชุฑ.
```

## ุงูุณุจุจ

ุชูุฌุฏ ุฅุญุฏุงุซูุงุช ุฎุงุทุฆุฉ ูู Firestore ูู:
```
schools/1/autoCalls/settings
```

ุงูุญูู `geofence` ูุญุชูู ุนูู ููู ุบูุฑ ุตุญูุญุฉ (lat: 0, lng: 0 ุฃู ููู ุนุดูุงุฆูุฉ).

## ุงูุญู ุงูุณุฑูุน - ุชุนุทูู ุงูุชุญูู ูู ุงููููุน

### ุงูุทุฑููุฉ 1: ูู Firebase Console

1. ุงูุชุญ: https://console.firebase.google.com
2. ุงุฎุชุฑ ูุดุฑูุนู: **alraed-8db3a**
3. Firestore Database โ Data
4. ุงูุชุญ ุงููุณุงุฑ:
   ```
   schools/1/autoCalls/settings
   ```

5. **ุงุญุฐู ุงูุญูู `geofence` ุชูุงูุงู**
   - ุงุถุบุท ุนูู ุงูุญูู `geofence`
   - ุงุถุบุท ุนูู ุฃููููุฉ ุณูุฉ ุงูููููุงุช ๐๏ธ
   - ุงุญูุธ

6. ุฃุนุฏ ุชุญููู ุตูุญุฉ ููู ุงูุฃูุฑ

**ุงููุชูุฌุฉ:** ูู ูุทูุจ ุงูุชุญูู ูู ุงููููุน ููุงุฆูุงู โ

---

### ุงูุทุฑููุฉ 2: ูู ุตูุญุฉ ุงูุฅุฏุงุฑุฉ

1. ุงูุชุญ:
   ```
   http://localhost:5173/admin/auto-call
   ```

2. ุชุจููุจ **Settings**

3. ุงุจุญุซ ุนู ูุณู **Geofence** ุฃู **ุงููุทุงู ุงูุฌุบุฑุงูู**

4. **ุงุชุฑู ุงูุญููู ูุงุฑุบุฉ** ุฃู ุนุทูู ุงูุฎูุงุฑ

5. ุงุญูุธ ุงูุฅุนุฏุงุฏุงุช

---

## ุงูุญู ุงููุงูู - ุถุจุท ุฅุญุฏุงุซูุงุช ุตุญูุญุฉ

ุฅุฐุง ุฃุฑุฏุช ุชูุนูู ุงูุชุญูู ูู ุงููููุน ุจุดูู ุตุญูุญ:

### ุงูุฎุทูุฉ 1: ุงุญุตู ุนูู ุฅุญุฏุงุซูุงุช ุงููุฏุฑุณุฉ

ุงุณุชุฎุฏู Google Maps:
1. ุงุฐูุจ ุฅูู: https://www.google.com/maps
2. ุงุจุญุซ ุนู ุนููุงู ูุฏุฑุณุชู
3. ุงุถุบุท ุจูููู ุงููุงูุณ ุนูู ูููุน ุงููุฏุฑุณุฉ
4. ุงุฎุชุฑ "ุฅุญุฏุงุซูุงุช" (ุฃู ุงูุณุฎ ุงูุฃุฑูุงู ูู ุงูุฃุนูู)
5. ุณุชุญุตู ุนูู ุดูุก ูุซู:
   ```
   21.422510, 39.826168
   ```
   - ุงูุฃูู: Latitude (ุฎุท ุงูุนุฑุถ)
   - ุงูุซุงูู: Longitude (ุฎุท ุงูุทูู)

### ุงูุฎุทูุฉ 2: ุถุนูุง ูู Firestore

ูู Firebase Console:
```
schools/1/autoCalls/settings
```

ุนุฏูู ุฃู ุฃุถู ุญูู `geofence`:

| Field | Type | Value |
|-------|------|-------|
| geofence | map | (ุฃูุดุฆ map ุฌุฏูุฏ) |
| geofence.latitude | number | 21.422510 |
| geofence.longitude | number | 39.826168 |
| geofence.radiusMeters | number | 150 |

**ูุซุงู:**
```json
{
  "geofence": {
    "latitude": 21.422510,
    "longitude": 39.826168,
    "radiusMeters": 150
  }
}
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุฑ

1. ุงูุชุญ ุตูุญุฉ ููู ุงูุฃูุฑ
2. ุงุถุบุท "ุทูุจ ุงุณุชูุงู ุงูุทุงูุจ"
3. ูุฌุจ ุฃู ูุทูุจ ุฅุฐู ุงููููุน ูู ุงููุชุตูุญ
4. ุณูุญุณุจ ุงููุณุงูุฉ ุงูุตุญูุญุฉ

---

## ูุญุต ุงููุดููุฉ ูู Console

ุงูุชุญ Console (F12) ูุงุจุญุซ ุนู:

```javascript
๐บ๏ธ Geofence resolution: {
  'autoCallSettings?.geofence': {
    latitude: 0,  // โ ุฅุฐุง ูุงูุช 0 ููุฐู ุงููุดููุฉ!
    longitude: 0,
    radiusMeters: 145
  }
}

๐ Distance calculation: {
  userLat: 21.5,      // ูููุนู ุงูุญูููู
  userLng: 39.8,
  schoolLat: 0,       // โ ุงููุดููุฉ ููุง!
  schoolLng: 0,
  distance: 3304382,  // ุงููุณุงูุฉ ุจููู ูุจูู (0,0) = ูุณุท ุงููุญูุท ุงูุฃุทูุณู!
}
```

---

## ุงูุชูุตูุฉ

**ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ:**
- ุงุญุฐู ุญูู `geofence` ุชูุงูุงู ูู Firestore
- ููุฐุง ููููู ุงูุงุฎุชุจุงุฑ ุจุฏูู ูููุฏ ุงููููุน

**ููุฅูุชุงุฌ:**
- ุถุน ุฅุญุฏุงุซูุงุช ุงููุฏุฑุณุฉ ุงูุตุญูุญุฉ
- ุงุถุจุท `radiusMeters` ุนูู ูุณุงูุฉ ูุนูููุฉ (100-300 ูุชุฑ)

---

## ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ

### ุชุนุทูู Geofence ูู Console

ุฅุฐุง ุฃุฑุฏุช ุชุนุทููู ูุคูุชุงู ููุงุฎุชุจุงุฑ ุจุฏูู Firebase Console:

ูู Console ุงููุชุตูุญ (F12) ุนูู ุตูุญุฉ ุงูุฅุฏุงุฑุฉ:
```javascript
// ุณูุนูู ููุท ุฅุฐุง ูุงูุช ุตูุญุฉ ุงูุฅุฏุงุฑุฉ ููุชูุญุฉ
// ูุณุชุญุชุงุฌ ุฅุฐู ูุชุงุจุฉ ุนูู Firestore
```

ุฃูุถู: ุงุณุชุฎุฏู Firebase Console ูุงุญุฐู ุงูุญูู.

---

## ุงูุฎูุงุตุฉ

**ุงููุดููุฉ:** ุฅุญุฏุงุซูุงุช ุฎุงุทุฆุฉ (0, 0) ูู Firestore

**ุงูุญู ุงูุณุฑูุน:**
1. ุงูุชุญ Firebase Console
2. `schools/1/autoCalls/settings`
3. ุงุญุฐู ุญูู `geofence`
4. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

**ุงูุญู ุงููุงูู:**
1. ุงุญุตู ุนูู ุฅุญุฏุงุซูุงุช ุงููุฏุฑุณุฉ ูู Google Maps
2. ุถุนูุง ูู `geofence` ุจุดูู ุตุญูุญ
3. ุงุฎุชุจุฑ ูู ูููุน ูุฑูุจ ูู ุงููุฏุฑุณุฉ

ุงูุขู ุฌุฑุจ ูุฃุฎุจุฑูู ุงููุชูุฌุฉ! ๐
